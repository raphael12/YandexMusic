# YandexMusic

## Постановка задачи, ТЗ

Обнаружение треков каверов - важная продуктовая задача, которая может значительно улучшить качество рекомендаций музыкального сервиса и повысить счастье наших пользователей. Если мы умеем с высокой точностью классифицировать каверы и связывать их между собой, то можно предложить пользователю новые возможности для управления потоком треков. Например:  
1.	по желанию пользователя можем полностью исключить каверы из рекомендаций;  
2.	показать все каверы на любимый трек пользователя;  
3.	контролировать долю каверов в ленте пользователя.  
В этом хакатоне вам предлагается разработать решение, которое:  
1.	может классифицировать треки по признаку кавер-некавер;  
2.	связывать (группировать) каверы и исходный трек;  
3.	находит исходный трек в цепочке каверов.  

## Доступные данные:  

### Целевые данные:  
•	track_id - уникальный идентификатор трека;  
•	track_remake_type - метка, присвоенная редакторами. Может принимать значения ORIGINAL и COVER;  
•	original_track_id - уникальный идентификатор исходного трека.  

### Метаинформация:  
•	track_id - уникальный идентификатор трека;  
•	dttm - первая дата появления информации о треке;  
•	title - название трека;  
•	language - язык исполнения;  
•	isrc - международный уникальный идентификатор трека;  
•	genres - жанры;  
•	duration - длительность трека  

### Текст песен  
•	track_id - уникальный идентификатор трека;  
•	lyricId - уникальный идентификатор текста;  
•	text - текст трека.  

## Описание решения

Предполагается, что решение будет представлять двустадийную модель и осуществлено следующим алгоритмом (Рис 1):  
1.	В базу всех треков делается запрос "Найти похожее по тексту" к конкретному треку  
2.	С помощью кластеризации выбираются самые похожие  
3.	Накладывается необходимый фильтр на отобранные треки  

Пункт 3 может являться достаточно расплывчатым и может включать в себя много дополнительных параметров, необходимых заказчику. Например:  
3.1) Отбор песен по жанрам  
3.2) Вывод только оригиналов  
3.3) Вывод только каверов, по степени схожести к запрашиваемому треку или к оригиналу  
3.4) Вывод самых близких песен по тексту, в том числе и не каверы  

![alt text](https://github.com/raphael12/YandexMusic/blob/main/images/%D0%A0%D0%B8%D1%81%201.png)

Работа online с большим количеством данных накладывает на алгоритм серьезные рамки времени работы и поиска. Для пользователя всё должно быть практически мгновенно. Поэтому необходимо подобрать подход с самым хорошим соотношением точности ко времени выполнения.  

## Exploratory data analysis (EDA)

По результатам анализа, было выявлено следующее:  
Файл Covers.json:  
1) соотношение треков оригинал/кавер - 6%/94%  

![alt text](https://github.com/raphael12/YandexMusic/blob/main/images/%D0%A0%D0%B8%D1%81%202.png)  

2) Имеется большое количество пропусков в колонке **original_track_id** (66776 из 71597). Это сильно ограничивает количество данных и усложняет работу с моделями.

Файл lyrics.json:  
1) Во всех столбцах есть повторы, к одним и тем же трекам могут быть приписаны разные тексты. Это может быть связано с различными источниками этих текстов, исполненную несколько раз (например, два альбома или концертная запись) или же просто дубли загрузки  
2) Если посмотреть на длину треков, то видно, что есть сильно короткие и невероятно длинные треки. Это может быть связано как со спецификой треков, так и с возможными ошибками в данных. Медианная длина текста находится в 1165 символах  


![alt text](https://github.com/raphael12/YandexMusic/blob/main/images/%D0%A0%D0%B8%D1%81%203.png) 

Файл **meta**:  
1) Пропуски пресутствуют в языках и isrc     
2) Топ 10 жанров :'FOLK', 'LATINFOLK', 'POP', 'ALLROCK', 'ROCK', 'ALTERNATIVE','ELECTRONICS', 'SOUNDTRACK', 'RAP', 'DANCE'  

![alt text](https://github.com/raphael12/YandexMusic/blob/main/images/%D0%A0%D0%B8%D1%81%204.png)  

3) Наиболее популярные языки: Английский, Испанский, Русский  

![alt text](https://github.com/raphael12/YandexMusic/blob/main/images/%D0%A0%D0%B8%D1%81%205.png)  

4) Время самое ранние упоминания из столбца **ddtm** 08.2009 последнее 2023-10, бум упоминаний треков приходится на октябрь-ноябрь 2021
5) Большая часть данных, судя по всему, не имеет каверов, треки с первым и единственным упоминанием доминируют в данных, если не брать во внимание случаи одинаковых названий
6) Для столбца isrc извлекли признаки, проверили на корректность, существуют трек для которых один isrc для разных track_id, возможно из-за того что один трек в разные альбомы
7) Дата из isrc не всегда совпадает с датой в ddtm, есть аномалии с данными больше чем 23 год и их нельзя найти в базе

![alt text](https://github.com/raphael12/YandexMusic/blob/main/images/%D0%A0%D0%B8%D1%81%206.png)  



